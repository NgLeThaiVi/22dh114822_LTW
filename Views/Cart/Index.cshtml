
@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

@*GIỎ HÀNG*@<h2>Giỏ Hàng</h2>

<div class="shoppingcart">
 @if (!Model.Items.Any())
 { <p> Bạn chưa có sản phẩm nào trong giỏ </p> }
 else
 {
         <table class="table col-md-8 cart-section">
             <thead>
                 <tr>
                     <th colspan = "2" > Sản phẩm</th>
                     <th>Số lượng</th>
                     <th>Đơn giá</th>
                     <th>Thành tiền</th>
                     <th>
                     <th title = "Xóa tất cả mặt hàng trong giỏ" >
                         <a href= "@Url.Action("ClearCart", "Cart", null)"> <img src= "~/Images/remove.png" style= "max-height:20px;" /> </a>
                     </th >
                 </tr >
             </thead >
             <tbody >
                 @foreach (var item in Model.Items)
                 {
                     <tr>
                         <td class="img-src">
                             <img src = "@item.ProductImage" alt="@item.ProductName" style="max-height:80px;" />
                         </td>
                         <td class="col-md-3">@item.ProductName</td>
                         <td>
                             @using (Html.BeginForm("UpdateQuantity", "Cart", FormMethod.Post))
                             {
                                 <input type = "hidden" name="id" value="@item.ProductID" />
                                 <button type = "button" style="width: 20px;" onclick="@Url.Action("UpdateQuantity", "Cart", new { id = item.ProductID, quantity = item.Quantity - 1 })"> - </button>
                                 <input type = "number" name="quantity" value="@item.Quantity" min="1" max="100" style="width: 60px; text-align:right;" readonly />
                                 <button type = "button" style="width: 20px;" onclick="@Url.Action("UpdateQuantity", "Cart", new { id = item.ProductID, quantity = item.Quantity + 1 })"> + </button>
                             }
                         </td>
                         <td>@item.UnitPrice.ToString("N0")</td>
                         <td>@item.TotalPrice.ToString("N0")</td>
                         <td>
                             <a href = "@Url.Action("RemoveFromCart", "Cart", new { id = item.ProductID })">
                                 <img src = "~/Images/remove.png" style="max-height: 20px;" />
                             </a>
                         </td>
                     </tr>
                 }
             </tbody >
         </table >
        <hr />
 <div class= "col-md-3 cart-section" >
 <div class= "strong-giá-trị" > Tổng giá trị: &nbsp;<span style="color: red;">@Model.TotalValue.ToString("N0")</span>
</div>
     @Html.ActionLink("Mua hàng", "Checkout", "Cart", null, new { @class = "btn-btn-danger cart-button" })
 </div>
 }
 </div>
 <div class="col-md-12">
         @Html.ActionLink("Tiếp tục mua hàng", "Index", "Home", null, new { @class = "btn-btn-warning cart-button" })
    
</div>